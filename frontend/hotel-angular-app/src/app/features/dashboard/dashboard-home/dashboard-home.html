<div class="dashboard-home">
  <!-- Header avec le nom de l'utilisateur -->
  <div class="dashboard-header" *ngIf="currentUser$ | async as user">
    <h1>Bienvenue, {{ user.firstName || user.email }} !</h1>
    <p>Voici un aperçu de votre tableau de bord</p>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="60"></mat-spinner>
    <p>Chargement des statistiques...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-card class="error-card">
      <mat-card-content>
        <mat-icon color="warn">error_outline</mat-icon>
        <p>{{ error }}</p>
        <button mat-raised-button color="primary" (click)="refreshStats()">
          <mat-icon>refresh</mat-icon>
          Réessayer
        </button>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Stats Cards -->
  <div *ngIf="!loading && !error" class="stats-grid">
    <!-- Total Réservations -->
    <mat-card class="stat-card booking-card">
      <mat-card-content>
        <div class="stat-icon">
          <mat-icon>event_note</mat-icon>
        </div>
        <div class="stat-info">
          <h2 class="stat-number">{{ stats.totalBookings }}</h2>
          <p class="stat-label">Réservations totales</p>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- En Attente -->
    <mat-card class="stat-card pending-card">
      <mat-card-content>
        <div class="stat-icon">
          <mat-icon>schedule</mat-icon>
        </div>
        <div class="stat-info">
          <h2 class="stat-number">{{ stats.pendingBookings }}</h2>
          <p class="stat-label">En attente</p>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Factures -->
    <mat-card class="stat-card invoice-card">
      <mat-card-content>
        <div class="stat-icon">
          <mat-icon>receipt_long</mat-icon>
        </div>
        <div class="stat-info">
          <h2 class="stat-number">{{ stats.totalInvoices }}</h2>
          <p class="stat-label">Factures</p>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Chambres Disponibles -->
    <mat-card class="stat-card room-card">
      <mat-card-content>
        <div class="stat-icon">
          <mat-icon>hotel</mat-icon>
        </div>
        <div class="stat-info">
          <h2 class="stat-number">{{ stats.availableRooms }}</h2>
          <p class="stat-label">Chambres disponibles</p>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Actions Rapides -->
  <div *ngIf="!loading" class="actions-section">
    <h2>Actions rapides</h2>
    <div class="actions-grid">
      <button mat-raised-button color="primary" routerLink="/dashboard/rooms" class="action-btn">
        <mat-icon>search</mat-icon>
        Rechercher une chambre
      </button>

      <button mat-raised-button color="accent" routerLink="/dashboard/bookings" class="action-btn">
        <mat-icon>event_note</mat-icon>
        Mes réservations
      </button>

      <button mat-raised-button routerLink="/dashboard/billing" class="action-btn">
        <mat-icon>receipt_long</mat-icon>
        Mes factures
      </button>
    </div>
  </div>
</div>